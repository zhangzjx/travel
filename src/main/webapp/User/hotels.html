<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>t</title>
    <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="js/topFoot.js"></script>
    <script type="text/javascript"  src="../res/layui/layui.all.js"></script>
    <script src="js/jquery.cookie.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="../res/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="css/topFoot.css">
    <link rel="stylesheet" type="text/css" href="css/hotels.css">
    <script>
        $(document).ready(function(){
            // 页面加载后任何需要执行的js特效
            if($.cookie("userCookie") != null&&$.cookie("userCookie")!= ""){
                console.log("userCookie存在");
                $("#logout").show();

            } else {
                console.log("userCookie不存在");
                $("#login").show()
                //$("#account").show()
            }

        });
    </script>
    <style type="text/css">

        /*********旅游景点***********/

        a{cursor: pointer}
        .button-hide{display: none}
        .hotels-main{width: 1200px;min-height: 1500px;margin: 30px auto 0;}

    </style>
</head>
<body>
<!-- header -->
<div class="header-box">
    <div class="header-top">
        <!--
        <ul class="app-header">
          <li class="app-header-menuicon">
             <i class="layui-icon layui-icon-more-vertical"></i>
          </li>
        </ul>
        -->
        <div class="logo">
            <a href="index.html"><img src="img/logo.png" class="logo-img"></a>
        </div>
        <div class="login" id="login" style="display:none;">
            <input type="button" onclick="reg()" class="login-btn layui-btn layui-btn-primary" value="注册" title="成为会员，享受专属优惠">
            <input type="button" onclick="log()" class="login-btn layui-btn layui-btn-primary" value="登录" title="登录后搜索结果更贴心">
        </div>
        <div class="login" id="logout" style="display:none;" >
            <div class="account" >
                <a href="myInf.html">
                    <img src="img/account.png" alt="账户" style="width: 25px;height: 25px;">
                    <br>
                    <span style=" font-size: 9pt; ">账户</span>
                </a>
            </div>
            <input type="button" onclick="logout()" class="login-btn layui-btn layui-btn-primary" value="退出" title="退出">

        </div>
        <!--
        <ul class="layui-nav header-down-nav">
          <li class="layui-nav-item"><a href="index.html" class="active">首页</a></li>
          <li class="layui-nav-item"><a href="case.html">案例</a></li>
          <li class="layui-nav-item"><a href="service.html">服务</a></li>
          <li class="layui-nav-item"><a href="about.html">关于</a></li>
        </ul>-->
    </div>
    <div class="header-foot">
        <div class="header-foot-item" >
            <a href="hotels.html"><img src="img/index-1.png" class="foot-img"><span>住宿</span></a>
        </div>
        <div class="header-foot-item">
            <a href="attractions.html"><img src="img/index-4.png" class="foot-img"><span>景点</span></a>
        </div>
    </div>
</div>
<!-- end-header -->
<!-- top -->
<div id="hotel-top" class="top">
    <div class="top-content">

        <div class="hotels-title">
            <h1><strong>酒店和住宿</strong></h1>
        </div>
        <div class="top-date">
            <div class="date-item">
                <img src="img/hotel-calendar.png" class="img">
                <input type="text" id="start" class="el-input" >
            </div>
            <div class="date-item">
                <img src="img/hotel-calendar.png" class="img">
                <input type="text" id="end" class="el-input" >

            </div>
            <div class="date-item">
                <img src="img/hotel-people.png" class="img">
                <input type="text" id="people"  class="el-input" >
            </div>
        </div>
    </div>
</div>

<!-- end-top -->
<!-- content -->
<div class="content">
    <!--主要内容-->
    <div class="hotels-main">

        <div class="hotels-left">
            <div class="left-list-1">
                <img src="img/view-1.png" class="left-img">
                <input type="button" class="view-btn layui-btn layui-btn-primary" value="查看地图" title="查看地图"/>
            </div>

            <div class="left-list-2">
                <p><h2>设施服务</h2></p>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">免费Wifi</span><span class="span-right">54</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">免费Wifi</span><span class="span-right">54</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">含早餐</span><span class="span-right">54</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">游泳池</span><span class="span-right">54</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">免费停车</span><span class="span-right">54</span>
                </div>

            </div>
            <div class="left-list-2">
                <p><h2>您的预算</h2></p>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">0元 - 388元</span><span class="span-right">54</span>
                </div>

                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">388元 - 776元</span><span class="span-right">226</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">776元 - 1,160元</span><span class="span-right"> 209</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">1,160元 - 1,550元</span><span class="span-right"> 98</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">1,550元 +</span><span class="span-right">141</span>
                </div>
            </div>
            <div class="left-list-2">
                <p><h2>酒店星级</h2></p>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">5 星级</span></span><span class="span-right">103</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">4 星级</span><span class="span-right">141</span>
                </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">3 星级</span><span class="span-right">141</span>
               </div>
                <input type="checkbox">
                <div class="circle-content">
                    <span class="span-left">2 星级</span><span class="span-right">141</span>
               </div>
            </div>


        </div>
        <div class="hotels-right">
            <div class="right-top">
                <div class="top-left"></div>
                <div class="top-right">
                    <span style="font-size: 11pt">排序方式：</span>
                    <select id="sKey" name="sKey" class="el-select">
                        <option value="gid">价格升序</option>
                        <option value="goods_name">价格降序</option>
                        <option value="Categories_two">超值排序</option>
                    </select>
                </div>
            </div>
            <!--
                <div class="right-content">
                    <img src="img/j-1.jpg" class="right-img">
                    <div class="right-item-top">
                        <h2><b>北京金隅八达岭智选假日酒店</b></h2>
                    </div>
                    <div class="right-item" style="border-right: #d4d4d4 solid 1px">
                        <h2><b>￥620</b></h2>
                        <input type="button" class="el-button layui-btn layui-btn-warm" value="查看优惠">
                    </div>
                    <div class="right-item-2">
                        <div class="f" style="height: 50px;"></div> <span>429 条点评</span>
                        <p>北京市符合筛选条件的超值酒店中排名第 1</p>
                        <div class="m">
                            <ul>
                                <li><img src="img/hotel-wifi.png">免费Wifi</li>
                                <li><img src="img/hotel-restaurant.png">餐厅</li>
                                <li><img src="img/hotel-parking.png">免费停车</li>
                            </ul>
                        </div>
                    </div>
                </div>
                -->
                <div id="result_list"></div>
                <!--分页 -->
                <div style="background-color: #fff; margin-top: 3px" class="pagination" >
                    <div style="width: 45%;text-align: left;margin-left: 20px;float: left">
                        共找到<span id="totalSize"></span>条记录，每页<span id="pageSize"></span>条，
                        共<span id="totalPage"></span>页，当前第<span id="currentPage"></span>页
                    </div>
                    <div style="float: left;width: 35%;">
                        <!-- 首页 -->
                        <a href="#result_parks" >
                            <button id="firstPage" type="button" class="layui-btn layui-btn-primary layui-btn-sm ">首页</button>
                            <button id="firstPageClick" type="button" class="layui-btn layui-btn-sm button-hide">首页</button>
                        </a>
                        <!-- 上一页 -->

                        <button id="lastPage" type="button" class="layui-btn layui-btn-primary layui-btn-sm">上一页</button>
                        <button id="lastPageClick" type="button" class="layui-btn layui-btn-sm button-hide">上一页</button>

                        <!-- 下一页 -->

                        <button id="nextPage" type="button" class="layui-btn layui-btn-primary layui-btn-sm">下一页</button>
                        <button id="nextPageClick" type="button" class="layui-btn layui-btn-sm button-hide">下一页</button>

                        <!-- 尾页 -->

                        <button id="finalPage" type="button" class="layui-btn layui-btn-primary layui-btn-sm">尾页</button>
                        <button id="finalPageClick" type="button" class="layui-btn layui-btn-sm button-hide">尾页</button>

                    </div>
                    <div style="float: left">
                        <div style="margin-right: 20px;float: left">跳至<input  type="text" id="num" name="currentPage" style="height: 20px;width: 30px;margin: 0 5px;">页</div>
                        <button id="jump" type="button" class="layui-btn layui-btn-sm">确定</button>
                    </div>
                </div>
        </div>

    </div>
</div>
<!-- end-content -->
<!-- end-content -->
<!--底部内容-->

<div class="bottom-foot" >
    <h2>热门目的地</h2>
    SeeWorld 是全球领先的旅游网站，旨在帮助旅行者计划和预定完美旅行。
    浏览超过 2 亿条点评和评论以及酒店、餐厅和景点等照片。
    您还可以查找低价机票、免费旅行指南、全球度假租屋名录以及热门论坛，它们提供有关每个目的地的建议等信息。
    有如此之多的用户在每次旅行之前都会首先访问 Booking 网站也不足为奇。
    <h2>全球领先的旅行信息平台。</h2>
    SeeWorld 每月帮助近五亿名旅行者尽享每次旅行。
    使用 SeeWorld 网站和 App 浏览数亿条点评和建议，内容涵盖住宿、餐厅、体验、航空公司和邮轮。
    无论是在计划还是在路上，旅行者都可以通过SeeWorld  比较酒店、航班和邮轮的超低价格、预订热门游览和景点并在绝佳餐厅订位。
    终极旅行伴侣 SeeWorld 服务范围涵盖 49 个市场，支持 28 种语言。
    <div class="bottom">
        <div class="bottom-main">
            <div class="bottom-main-list" style="font-size: 13pt;font-weight: bold;">热门地区</div><br>
            <div class="bottom-main-list"><a href="#">北京市</a></div>
            <div class="bottom-main-list"><a href="#">香港特别行政区</a></div>
            <div class="bottom-main-list"><a href="#">重庆市</a></div>
            <div class="bottom-main-list"><a href="#">上海市</a></div>
            <div class="bottom-main-list"><a href="#">广东省</a></div>
        </div>
        <div class="bottom-main">
            <div class="bottom-main-list" style="font-size: 13pt;font-weight: bold;">中部地区</div><br>
            <div class="bottom-main-list"><a href="#">山西省</a></div>
            <div class="bottom-main-list"><a href="#">河南省</a></div>
            <div class="bottom-main-list"><a href="#">河北省</a></div>
            <div class="bottom-main-list"><a href="#">湖北省</a></div>
            <div class="bottom-main-list"><a href="#">湖南省</a></div>
        </div>
        <div class="bottom-main">
            <div class="bottom-main-list" style="font-size: 13pt;font-weight: bold;">北方地区</div><br>
            <div class="bottom-main-list"><a href="#">黑龙江省</a></div>
            <div class="bottom-main-list"><a href="#">吉林省</a></div>
            <div class="bottom-main-list"><a href="#">辽宁省</a></div>
            <div class="bottom-main-list"><a href="#">河北省</a></div>
            <div class="bottom-main-list"><a href="#">山东省</a></div>

        </div>
        <div class="bottom-main">
            <div class="bottom-main-list" style="font-size: 13pt;font-weight: bold;">西南地区</div><br>
            <div class="bottom-main-list"><a href="#">四川省</a></div>
            <div class="bottom-main-list"><a href="#">贵州省</a></div>
            <div class="bottom-main-list"><a href="#">云南省</a></div>
            <div class="bottom-main-list"><a href="#">重庆市</a></div>
            <div class="bottom-main-list"><a href="#">西藏自治区</a></div>
        </div>
        <div class="bottom-main">
            <div class="bottom-main-list" style="font-size: 13pt;font-weight: bold;"><a href="#">西北地区</a></div><br>
            <div class="bottom-main-list"><a href="#">陕西省</a></div>
            <div class="bottom-main-list"><a href="#">甘肃省</a></div>
            <div class="bottom-main-list"><a href="#">青海省</a></div>
            <div class="bottom-main-list"><a href="#">宁夏回族自治区</a></div>
            <div class="bottom-main-list"><a href="#">新疆维吾尔自治区</a></div>
        </div>
    </div>
    <div class="foot">
        <ul>
            <li><a href="#"> 关于我们</a></li>
            <li><a href="#"> 新闻动态</a></li>
            <li><a href="#"> 工作机会</a></li>
            <li><a href="#"> 商务合作</a></li>
            <li><a href="#"> 会员中心</a></li>
            <li><a href="#"> 常见问题</a></li>
            <li><a href="#"> 意见反馈</a></li>
            <li><a href="#"> 联系我们</a></li>
            <li><a href="#"> 营业执照</a></li>
        </ul>
        <div >
            © 2020 SeeWorld 版权所有。<a href="#">使用条款</a> | <a href="#">隐私政策</a> | <a href="#">网站工作原理</a>
            * SeeWorld不是旅行社，也不是旅游预订服务代理商。我们提供免费、客观、公正的旅游资讯服务。
        </div>
        <div > 京ICP证080678号京ICP备09040564号京公网安备11010502036828号
        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="../res/layui/layui.all.js"></script>

<script>
    //定义方法
    $(document).ready(function() {


    /**查询所有信息*/
    $.ajax({
        url: "../UserHotelServlet", // 请求路径
        type: "POST", //请求方式
        data: {
            action:"getAllHotelInf",
        },
        success: function (data) {
            console.log("dd"+data);
            show(data);

        },//响应成功后的回调函数
        error: function () {
            console.log("失败啦...")
        },//表示如果请求响应出现错误，会执行的回调函数

        dataType: "text"//设置接受到的响应数据的格式
    });

    /**首页*/
    $("#firstPageClick").click(function () {
        $("html,body").animate({scrollTop: $("#hotel-top").offset().top}, 500);
        let current = 1;
        $.ajax({
            url: "../UserHotelServlet", // 请求路径
            type:"Get" , //请求方式
            dataType:"text",//设置接受到的响应数据的格式
            //action=findAllOrder&uid=${user.uid }&currentPage=${order.currentPage != 1
            data:{ action:"getAllHotelInf",
                currentPage:current,
            },
            success:function (data) {
                console.log("dd"+data);
                show(data);
            },
            error:function () {
                console.log("出错啦...")
            },
        });
    });
    /**上一页*/
    $("#lastPageClick").click(function () {
        $("html,body").animate({scrollTop: $("#hotel-top").offset().top}, 500);
        let currentPage = $("#currentPage").html();
        let current = currentPage-1;
        $.ajax({
            url: "../UserHotelServlet",
            type:"Get" ,
            dataType:"text",
            data:{ action:"getAllHotelInf",
                currentPage:current,
            },
            success:function (data) {
                console.log("dd"+data);
                show(data);
            },
            error:function () {
                console.log("出错啦...")
            },
        });
    });
    /**下一页*/
    $("#nextPageClick").click(function () {
        $("html,body").animate({scrollTop: $("#hotel-top").offset().top}, 500);
        let currentPage = $("#currentPage").html();
        let current = parseInt(currentPage)+1;
        $.ajax({
            url: "../UserHotelServlet",
            type:"Get" ,
            dataType:"text",
            data:{ action:"getAllHotelInf",
                currentPage:current,
            },
            success:function (data) {
                console.log("dd"+data);
                show(data);
            },
            error:function () {
                console.log("出错啦...")
            },
        });
    });
    /**尾页*/
    $("#finalPageClick").click(function () {
        $("html,body").animate({scrollTop: $("#hotel-top").offset().top}, 500);
        let current = $("#totalPage").html();
        $.ajax({
            url: "../UserHotelServlet",
            type:"Get" ,
            dataType:"text",
            data:{ action:"getAllHotelInf",
                currentPage:current,
            },
            success:function (data) {
                console.log("dd"+data);
                show(data);
            },
            error:function () {
                console.log("出错啦...")
            },
        });
    });
    /**跳页*/
    $("#jump").click(function () {
        $("html,body").animate({scrollTop: $("#hotel-top").offset().top}, 500);
        const current = $("#num").val();
        $.ajax({
            url: "../UserHotelServlet",
            type:"Get" ,
            dataType:"text",
            data:{ action:"getAllHotelInf",
                currentPage:current,
            },
            success:function (data) {
                console.log("dd"+data);
                show(data);
            },
            error:function () {
                console.log("出错啦...")
            },
        });
    });
    })
    /*******8******/
    function show(data){
        const json = eval("(" + data + ")");
        //将JSON对象转化为JSON字符
        const list = JSON.stringify(json.list);
        const j = eval("(" + list+ ")");

        $("#totalSize").html(json.totalSize);
        $("#pageSize").html(json.pageSize);
        $("#totalPage").html(json.totalPage);
        $("#currentPage").html(json.currentPage);
        if (json.currentPage==1){

            $("#firstPage").show();
            $("#lastPage").show();
            $("#nextPageClick").show();
            $("#finalPageClick").show();

            $("#firstPageClick").hide();
            $("#lastPageClick").hide();
            $("#nextPage").hide();
            $("#finalPage").hide();

        } else if (json.currentPage==json.totalPage ){
            $("#firstPageClick").show();
            $("#lastPageClick").show();
            $("#nextPage").show();
            $("#finalPage").show();

            $("#firstPage").hide();
            $("#lastPage").hide();
            $("#nextPageClick").hide();
            $("#finalPageClick").hide();

        } else if (json.currentPage!=1||json.currentPage!=json.totalPage ){
            $("#firstPage").hide();
            $("#lastPage").hide();
            $("#nextPage").hide();
            $("#finalPage").hide();
            $("#firstPageClick").show();
            $("#lastPageClick").show();
            $("#nextPageClick").show();
            $("#finalPageClick").show();
        }
        let str = "";//定义用于拼接的字符串
        for(let i = 0; i < 10; i++){    //遍历 数组//拼接表格的行和列
            const ls = j[i];

            str += "<div class='right-content'>" +
                "<img src='/hotelImg/"+ls.img_name+"' class='right-img'>" +
                "<div class='right-item-top'><h2><b>"+ls.hName+"</b></h2></div>" +
                "<div class='right-item' style='border-right: #d4d4d4 solid 1px'><h2><b>￥620</b></h2>" +
                "<a href='hotelReview.html?param="+ls.hId+"'>" +
                "<input type='button' class='el-button layui-btn layui-btn-warm' value='查看详情'></a></div>" +
                "<div class='right-item-2'><div class='m'>" +
                "<ul><li><img src='img/hotel-wifi.png'>免费Wifi</li>" +
                "<li><img src='img/hotel-restaurant.png'>餐厅</li>" +
                "<li><img src='img/hotel-parking.png'>免费停车</li></ul></div></div></div>";

            $("#result_list").html(str);

        };

    }
</script>
<script>
    //评分
    layui.use('rate', function(){
        const rate = layui.rate;
        //渲染
        const ins1 = rate.render({
            elem: '.f', //绑定元素
            value: 5,
            half: true,
            readonly: true,
        });
    });
    // 时间格式化
    const myDate = new Date();
    //const minDate = myDate.toLocaleDateString();
    let year = myDate.getFullYear();
    let month = myDate.getMonth()+1;
    let day =  myDate.getDate();
    const nowDate = year+"-"+month+ "-"+day;
    const endDate = year+"-"+month+ "-"+(day+1);//新日期

    layui.use('laydate', function(){
        const laydate = layui.laydate;
        //执行一个laydate实例
        laydate.render({
            elem: '#start', //指定元素
            trigger: 'click',
            value: nowDate ,//必须遵循format参数设定的格式
            min: nowDate ,
        });
    });

    layui.use('laydate', function(){
        const laydate = layui.laydate;
        //执行一个laydate实例

        laydate.render({
            elem: '#end', //指定元素
            trigger: 'click',
            format: 'yyyy-MM-dd',
            value: endDate ,//必须遵循format参数设定的格式
            min: endDate, // 限定可选日期为当前系统时间
            calendar: true,
            btns: ['clear', 'confirm']
        });
    });



    /**
    var currentDate = formatDate(new Date());
    layui.use(['form','laydate'], function () {
        const laydate = layui.laydate;
        laydate.render({
            elem: '#end'
            , type: 'datetime'
            , range: ' 到 '
            , trigger: 'click'
            , format: 'yyyy-MM-dd'
            , theme: '#85ab00'
            , min: currentDate // 限定可选日期为当前系统时间
            , btns: ['clear', 'confirm']
            , done: function (value, date) {

            }
            , change: function (value, date) {
                // 选择时间，时间改变时
                console.log('你选择的日期是：' + value + '<br><br>获得的对象是' + JSON.stringify(date))

            }
        });
    });
     */
</script>
</html>