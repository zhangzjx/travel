<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>u45</title>
    <link rel="stylesheet" href="../../layui/css/layui.css">
    <script type="text/javascript" src="../js/jquery-3.4.1.min.js"></script>
    <style type="text/css">
        .el-select{width: 200px;height: 35px;font-size: 10pt;margin-top: 10px;}
        .operating{width: 96%;height: 30px;margin: 10px 0;padding: 10px 30px;background-color:#f2f2f2}
    </style>
</head>
<body>

<form >
    <label>城市</label>

        <select id="sKey" name="sKey" class="el-select">
            <option value=""></option>
            <option value="0">北京</option>
            <option value="1">上海</option>
            <option value="2">广州</option>
            <option value="3">深圳</option>
            <option value="4">杭州</option>
        </select>
        <button class="layui-btn layui-btn-sm" lay-submit lay-filter="formSearch">搜索</button>

</form>
<div class="operating">
    <button class="layui-btn layui-btn-sm" lay-event="add">添加</button>
    <button class="layui-btn layui-btn-sm" lay-event="delete">删除</button>
</div>
<table class="layui-table" id="tab">
    <colgroup>
        <col width="60">
        <col width="200">
        <col width="60">
        <col width="60">
        <col width="40">
        <col width="60">
        <col width="60">
        <col width="200">
        <col width="60">
        <col width="60">
        <col width="200">
    </colgroup>
    <thead>
    <tr>
        <th>序号</th>
        <th>名称</th>
        <th>说明</th>
        <th>总房间数</th>
        <th>价格</th>
        <th>国家</th>
        <th>省份</th>
        <th>地址</th>
        <th>星级</th>
        <th>评分</th>
        <th>操作</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>贤心</td>
        <td>201</td>
        <td>人生</td>
        <td>贤心</td>
        <td>2019</td>
        <td>人生</td>
        <td>贤心</td>
        <td>209</td>
        <td>人生</td>
        <td>贤心</td>
        <td>
            <div id="op">
                <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
                <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
                <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
            </div>
        </td>
    </tr>

    </tbody>

</table>
<div id="pagination"></div>

<input type="button" class="layui-btn" value="点击" id="go">

</body>
<script type="text/javascript">
    //定义方法
    $(document).ready(function(){

        //使用$.ajax()发送异步请求
        $.ajax({
            //url:"${pageContext.request.contextPath}/AdminHotel" , // JSP页面使用 请求路径
            url:"../../AdminHotelServlet" , // 请求路径
            type:"Get" , //请求方式
            dataType:"json",//设置接受到的响应数据的格式
            //data: "username=jack&age=23",//请求参数
            data:{action:"findAllHotel",
            },
            success:function (data) {
                //alert(data);
                showData(data);//我们仅做数据展示
                //location.reload();
                //alert(data);
            },//响应成功后的回调函数
            error:function () {
                alert("出错啦...")
            },//表示如果请求响应出现错误，会执行的回调函数
        });


        //展示数据
        function showData(data) {
            let str = "";//定义用于拼接的字符串
            const op = $("#op").html();
            for (let i = 0; i < data.length; i++) {
                const ls = data[i];
                //拼接表格的行和列
                str = "<tr><td>" + ls.id + "</td><td>" + ls.name + "</td><td>" + ls.label + "</td><td>" + ls.star + "</td>" +
                    "<td>" + ls.price + "</td><td>" + ls.country + "</td><td>" + ls.province + "</td><td>" + ls.content + "</td>" +
                    "<td>" + ls.address + "</td><td>" + ls.star + "</td><td>"+ op +"</td></tr>";
                //追加到table中
                $("#tab").append(str);
            }
/**
             let html = "";
             for(let i = 0; i < data.length; i++){    //遍历data数组
                const ls = data[i];
              //  html +="<span>测试："+ls.name+"</span>";

                $(".two").html(html);; //在html页面id=test的标签里显示html内容
            }
 */
        }


        layui.use('laypage', function(){
            var laypage = layui.laypage;

            //执行一个laypage实例
            laypage.render({
                elem: 'pagination' //注意，这里的 test1 是 ID，不用加 # 号
                ,count: 50 //数据总数，从服务端得到
            });
        });
    });


</script>
</html>